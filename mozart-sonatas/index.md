---
vim:	ts=3:ft=liquid
---

<style>
li.tag-h2 {
	display: block;
	padding-top: 0px;
	margin-top: 0px;
	margin-left: 10px;
}

nav {
	overflow: scroll;
	position: relative;
	text-align: left;
	top: 20px;
}

footer {
	display: none;
}

html {
	width-min: 1060px;
}

section {
	/* margin-top: -375px !important; */
	top: -675px;
}

section h1, section h2 {
	display: none;
}
</style>

This page demonstrates display of <a target="_blank"
href="https://github.com/craigsapp/mozart-piano-sonatas">17 Mozart piano
sonatas</a> on a single page.  

<script type="text/x-humdrum" id="viewer"></script>

# Sonata no. 1 in C major K279/189d #
## 1. Allegro ##
<script type="text/x-humdrum" id="sonata01-1">{% include_relative kern/sonata01-1.krn -%}</script>
## 2. Andante ##
<script type="text/x-humdrum" id="sonata01-2">{% include_relative kern/sonata01-2.krn -%}</script>
## 3. Allegro ##
<script type="text/x-humdrum" id="sonata01-3">{% include_relative kern/sonata01-3.krn -%}</script>

# Sonata no. 2 in F major K280/189e #
## 1. Allegro assai ##
<script type="text/x-humdrum" id="sonata02-1">{% include_relative kern/sonata02-1.krn -%}</script>
## 2. Adagio ##
<script type="text/x-humdrum" id="sonata02-2">{% include_relative kern/sonata02-2.krn -%}</script>
## 3. Presto ##
<script type="text/x-humdrum" id="sonata02-3">{% include_relative kern/sonata02-3.krn -%}</script>

# Sonata no. 3 in B&#x266D; major K281/189f #
## 1. Allegro ##
<script type="text/x-humdrum" id="sonata03-1">{% include_relative kern/sonata03-1.krn -%}</script>
## 2. Andante amoroso ##
<script type="text/x-humdrum" id="sonata03-2">{% include_relative kern/sonata03-2.krn -%}</script>
## 3. Rondo: Allegro ##
<script type="text/x-humdrum" id="sonata03-3">{% include_relative kern/sonata03-3.krn -%}</script>

# Sonata no. 4 in E&#x266D; major K282/189g #
## 1. Allegro ##
<script type="text/x-humdrum" id="sonata04-1">{% include_relative kern/sonata04-1.krn -%}</script>
## 2. Menuett I & II ##
<script type="text/x-humdrum" id="sonata04-2">{% include_relative kern/sonata04-2.krn -%}</script>
## 3. Allegro ##
<script type="text/x-humdrum" id="sonata04-3">{% include_relative kern/sonata04-3.krn -%}</script>

# Sonata no. 5 in G major K283/189h #
## 1. Allegro ##
<script type="text/x-humdrum" id="sonata05-1">{% include_relative kern/sonata05-1.krn -%}</script>
## 2. Andante ##
<script type="text/x-humdrum" id="sonata05-2">{% include_relative kern/sonata05-2.krn -%}</script>
## 3. Presto ##
<script type="text/x-humdrum" id="sonata05-3">{% include_relative kern/sonata05-3.krn -%}</script>

# Sonata no. 6 in D major K284/205b #
## 1. Allegro ##
<script type="text/x-humdrum" id="sonata06-1">{% include_relative kern/sonata06-1.krn -%}</script>
## 2. Rondeau en polonaise: Andante ##
<script type="text/x-humdrum" id="sonata06-2">{% include_relative kern/sonata06-2.krn -%}</script>
## 3. Theme & variations ##
<script type="text/x-humdrum" id="sonata06-3a">{% include_relative kern/sonata06-3a.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3b">{% include_relative kern/sonata06-3b.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3c">{% include_relative kern/sonata06-3c.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3d">{% include_relative kern/sonata06-3d.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3e">{% include_relative kern/sonata06-3e.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3f">{% include_relative kern/sonata06-3f.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3g">{% include_relative kern/sonata06-3g.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3h">{% include_relative kern/sonata06-3h.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3i">{% include_relative kern/sonata06-3i.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3j">{% include_relative kern/sonata06-3j.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3k">{% include_relative kern/sonata06-3k.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3l">{% include_relative kern/sonata06-3l.krn -%}</script>
<script type="text/x-humdrum" id="sonata06-3m">{% include_relative kern/sonata06-3m.krn -%}</script>



<script type="text/x-humdrum" id="sonata07-1">{% include_relative kern/sonata07-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata07-2">{% include_relative kern/sonata07-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata07-3">{% include_relative kern/sonata07-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata08-1">{% include_relative kern/sonata08-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata08-2">{% include_relative kern/sonata08-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata08-3">{% include_relative kern/sonata08-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata09-1">{% include_relative kern/sonata09-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata09-2">{% include_relative kern/sonata09-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata09-3">{% include_relative kern/sonata09-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata10-1">{% include_relative kern/sonata10-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata10-2">{% include_relative kern/sonata10-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata10-3">{% include_relative kern/sonata10-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata11-1a">{% include_relative kern/sonata11-1a.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1b">{% include_relative kern/sonata11-1b.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1c">{% include_relative kern/sonata11-1c.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1d">{% include_relative kern/sonata11-1d.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1e">{% include_relative kern/sonata11-1e.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1f">{% include_relative kern/sonata11-1f.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-1g">{% include_relative kern/sonata11-1g.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-2">{% include_relative kern/sonata11-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata11-3">{% include_relative kern/sonata11-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata12-1">{% include_relative kern/sonata12-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata12-2">{% include_relative kern/sonata12-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata12-3">{% include_relative kern/sonata12-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata13-1">{% include_relative kern/sonata13-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata13-2">{% include_relative kern/sonata13-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata13-3">{% include_relative kern/sonata13-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata14-1">{% include_relative kern/sonata14-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata14-2">{% include_relative kern/sonata14-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata14-3">{% include_relative kern/sonata14-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata15-1">{% include_relative kern/sonata15-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata15-2">{% include_relative kern/sonata15-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata15-3">{% include_relative kern/sonata15-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata16-1">{% include_relative kern/sonata16-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata16-2">{% include_relative kern/sonata16-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata16-3">{% include_relative kern/sonata16-3.krn -%}</script>

<script type="text/x-humdrum" id="sonata17-1">{% include_relative kern/sonata17-1.krn -%}</script>
<script type="text/x-humdrum" id="sonata17-2">{% include_relative kern/sonata17-2.krn -%}</script>
<script type="text/x-humdrum" id="sonata17-3">{% include_relative kern/sonata17-3.krn -%}</script>


{% comment %}
	The following data is used to print some music in the header of this page.
	The include file _includes/music-banner.html reads this data and creates
	the notation in the header.  If there is a !!!title: record in the
	Humdrum data below, then it will be placed above the musical example.
{% endcomment %}

<div style="display:none" id="title-notation-source">
!!!title: Mozart: Piano sonata no. 1 in C major, K 279/K<sup>6</sup> 189d, mvmt. 1
{% include banner-scores/mozart-sonata01-1.krn -%}
</div>


<script>

//////////////////////////////
//
// DOMContentLoaded event listener -- Various hacks to the default styling
//   of the jekyll theme.
//

document.addEventListener("DOMContentLoaded", function(event) {
	var section = document.querySelector("section");
	section.style.height = "";
	section.style.minHeight = "1000px";


	// display the first movement
	displayHumdrum({
		source: "sonata01-1",
		target: "viewer",
		scale: 30
	});
	var tag = document.querySelector("li.tag-h2");
	tag.style.textShadow = "0px 0px 10px #aa0000";
});



//////////////////////////////
//
// DOMContentLoaded event listener -- Add click event callbacks for 
//   movement headings that will display the notation for the movement
//   in the main section.
//

document.addEventListener("DOMContentLoaded", function(event) {
	var mtags = document.querySelectorAll("li.tag-h2");
	console.log("MTAGS", mtags);
	for (var i=0; i<mtags.length; i++) {
		addClickCallback(mtags[i]);
	}
});



//////////////////////////////
//
// addClickCallback --
//

function addClickCallback(element) {
	var mvmt = 0;
	var matches = element.textContent.match(/^\s*(\d[a-z]?)\.?\s/);
	if (matches) {
		mvmt = parseInt(matches[1]);
	}
	if (mvmt < 1) {
		console.log("Warning: could not find movement number from heading", element);
		return;
	}
	var laste = element;
	while (laste && !laste.className.match(/tag-h1/)) {
		laste = laste.previousSibling;
	}
	if (!laste || !laste.className.match(/tag-h1/)) {
		console.log("Warning: could not find sonata entry for movement:", element, laste);
		return;
	}

	matches = laste.textContent.match(/Sonata\s+no\.?\s+(\d+)/i);
	if (!matches) {
		console.log("Warning: could not find sonata number from heading", laste);
		return;
	}
	var sonata = parseInt(matches[1]);
	// console.log("SONATA", sonata, "MOVEMENT", mvmt);

	element.addEventListener("click", function(event) {
		var m = mvmt;
		var s = sonata;
		var source = "sonata";
		if (s < 10) {
			source += "0";
		}
		source += s;
		source += '-';
		source += m;
		console.log("SOURCE", source);
		target = "viewer";
		// wait styling is not updating until displayHumdrum is finished...
		document.body.style.cursor = "wait";

		displayHumdrum({
			source: source,
			target: target,
			scale: 30,
			postFunction: cursorNormal
		});

		var tags = document.querySelectorAll("li.tag-h2");
		var i;
		for (i=0; i<tags.length; i++) {
			tags[i].style.textShadow = "";
		}
		console.log("EVENT", event);
		var element = null;
		for (i=0; i<event.path.length; i++) {
			if (event.path[i].className.match(/tag-h2/)) {
				element = event.path[i];
				break;
			}
		}
		if (element) {
			element.style.textShadow = "0px 0px 10px #aa0000";
		}
	})
}

function cursorNormal() {
	document.body.style.cursor = "";
}

</script>








